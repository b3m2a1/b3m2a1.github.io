<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
Writing Books in Mathematica |         b3m2a1

</title>
  <link rel="canonical" href="https://b3m2a1.github.io/writing-books-in-mathematica.html">

  <link rel="alternate" type="application/atom+xml" href="https://b3m2a1.github.io/feeds/all.atom.xml" title="Full Atom Feed">

  <link rel="apple-touch-icon" href="https://b3m2a1.github.io/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://b3m2a1.github.io/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://b3m2a1.github.io/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://b3m2a1.github.io/manifest.json">
  <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://b3m2a1.github.io/theme/css/bootstrap.css">
  <link rel="stylesheet" href="https://b3m2a1.github.io/theme/css/font-awesome.css">
  <link rel="stylesheet" href="https://b3m2a1.github.io/theme/css/style.css">


<meta name="description" content="As part of a continuing series on my new IDE and in particular a series that has focused on publishing—e.g., docs, websites—today we're gonna look at a new little extension to EasyIDE to work with creating books/tutorials in Mathematica. Obviously making a true book in Mathematica …">

<link href="https://b3m2a1.github.io/theme/prettify/styles/prettify-mma.min.css" rel="stylesheet">
<script src="https://b3m2a1.github.io/theme/prettify/src/prettify.js"></script>
<!-- <script src="https://b3m2a1.github.io/theme/prettify/src/lang-mma.min.js"></script> -->

<script>
  function moveWindow (){window.location.hash="main-content";}
</script>


<script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o);
    a.async = 1;
    a.src = g;
    m = s.getElementsByTagName(o)[0];
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-103560228-1', 'auto');
  ga('send', 'pageview');
</script>

  <script>
    function openNav() {
      var thumb = document.getElementById("nav-thumb");
      var bar = document.getElementById("side-nav");
      thumb.onclick= closeNav;
      bar.classList.add("right-bar-open");
      bar.classList.remove("right-bar-closed");
      thumb.classList.add("nav-thumb-open");
      thumb.classList.remove("nav-thumb-closed");
    }

    function closeNav() {
      var thumb = document.getElementById("nav-thumb");
      var bar = document.getElementById("side-nav");
      thumb.onclick= openNav;
      bar.classList.remove("right-bar-open");
      bar.classList.add("right-bar-closed");
      thumb.classList.remove("nav-thumb-open");
      thumb.classList.add("nav-thumb-closed")
    }
  </script>


</head>

<body onload="PR.prettyPrint(); moveWindow()"
>
  <header class="header">
    <div class="top-bar">
    <div class="site-image">
      <img src=https://b3m2a1.github.io/img/site-image.png alt="b3m2a1">
    </div>
    <div class="site-links bubble floating">
      <h1 class="title">
          <a href="https://b3m2a1.github.io/">
            b3m2a1
          </a>
        </h1>
        <ul
          class="list-inline row site-link-row"
          id="top-bar-link-row"
          >
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/pages/about.html">About</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/pages/contact.html">Contact</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/categories.html">Categories</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/tags.html">Tags</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/archives.html">Archives</a>
            </li>
        </ul>
    </div>
    </div>
  </header>

  <div class="main" id="main-content">

    <div class="right-bar right-bar-closed" id="side-nav">
      <button
        id="nav-thumb"
        class="nav-thumb nav-thumb-closed"
        onclick="openNav()"
        >
      </button>
      <div class="blogroll bubble inset">
        <p>Links</p>
        <ul class="blogroll-links right-bar-links list-inline">
            <li class="right-bar-item">
              <a href="https://github.com/b3m2a1" class="blogroll-link right-bar-link"
                target="_blank">
                GitHub
              </a>
            </li>
            <li class="right-bar-item">
              <a href="https://mathematica.stackexchange.com/users/38205" class="blogroll-link right-bar-link"
                target="_blank">
                StackExchange
              </a>
            </li>
            <li class="right-bar-item">
              <a href="https://paclets.github.io/PacletServer" class="blogroll-link right-bar-link"
                target="_blank">
                Paclet Server
              </a>
            </li>
            <li class="right-bar-item">
              <a href="https://www.wolframcloud.com/objects/b3m2a1.docs/DocumentationServer/" class="blogroll-link right-bar-link"
                target="_blank">
                Docs
              </a>
            </li>
          </ul>
      </div>
    </div>

    <div class="left-content">
      <div class="container">
        <h1>Writing Books in Mathematica
</h1>
        <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2019-04-23T23:20:23-05:00">
        <i class="fa fa-clock-o"></i>
        Tue 23 April 2019
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://b3m2a1.github.io/category/posts.html">posts</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://b3m2a1.github.io/author/b3m2a1.html">b3m2a1</a>      </li>
    </ul>
  </header>
  <div class="content">
    <p>As part of a  <a href="https://b3m2a1.github.io/making-docs-with-easyide.html">continuing</a>  <a href="https://b3m2a1.github.io/making-a-website-with-easyide.html">series</a> on  <a href="https://b3m2a1.github.io/easyide-an-ide-for-mathematica.html">my new IDE</a> and in particular a series that has focused on publishing—e.g., docs, websites—today we're gonna look at a new little extension to EasyIDE to work with creating books/tutorials in Mathematica. Obviously making a true book in Mathematica is something of a fool's errand, given that it doesn't have the detailed layout control of LaTeX or the grammar check/toolkit of Word, but making many chapter, many chapter PDFs, notebooks, and websites is entirely reasonable. Many people have done this over the years,  <a href="https://mresources.github.io/tutorial/">myself included</a> . With this new IDE work, though, this becomes even easier.</p>
<p><a id="gettingstarted" class="Subsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h2>Getting Started</h2>
<p>I won't repeat the instructions for getting started with EasyIDE altogether here, as they are in  <a href="https://b3m2a1.github.io/easyide-an-ide-for-mathematica.html">the</a>  <a href="https://b3m2a1.github.io/making-docs-with-easyide.html">previous</a>  <a href="https://b3m2a1.github.io/making-a-website-with-easyide.html">posts</a> . We will need to get started with our new book, though.  Here's a video showing the entire process:</p>
<iframe id="ytplayer" type="text/html" width="640" height="360"
src="https://www.youtube.com/embed/p1WRvwepdvI?autoplay=0"
  frameborder="0"></iframe>

<p><a id="creatingthebook" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Creating the Book Structure</h3>
<p>The book-content layout borrows directly from my general website building structure. We're just gonna add a few more points of metadata to it. To make this process more streamlined I've included a new Authoring toolbar that you can open by going to  <code>Window ▸ Add Toolbar</code> in the menus. Once you have the toolbar open you can hit  <code>Initialize Book</code> to get a dialog for making the new book.</p>
<p><a id="creatingabook" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Creating a Book Chapter</h3>
<p>Next we need to make a chapter for our content to live under. To do this we just hit the  <code>New Chapter</code> button in the bar and give our chapter a name. It's important that we do this before making a section, as every section needs a chapter.</p>
<p><a id="creatingabook" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Creating a Book Section</h3>
<p>This is where we'll actually write the content. To make one of these we hit  <code>New Section</code> , pick a chapter to file the section under, and then provide a name for the section. The new notebook will open up and we can put whatever content we have there.</p>
<p><a id="pullingcontentof" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Pulling Content of StackExchange</h3>
<p>To create a sample book I'm gonna pull a number of answers off StackExchange, say from the  <a href="https://mathematica.stackexchange.com/questions/18393/what-are-the-most-common-pitfalls-awaiting-new-users/">common pitfalls question</a> and the  <a href="https://mathematica.stackexchange.com/questions/18/where-can-i-find-examples-of-good-mathematica-programming-practice">good examples</a> question. The way I'll do this is via a Markdown → Notebook converter I wrote up as a generalization of my old Markdown → XML converter.</p>
<p>To pull an answer we can either get its Markdown via the Edit mechanism or we can use the API. For reasons of efficiency I'm going to choose the latter. If you don't have my StackExchange service connection <a href="https://paclets.github.io/PacletServer/serviceconnectionstackexchange.htm"> you can get it off the paclet server</a> . Once we have that we load the connection:</p>
<pre class="prettyprint"><code>$so = ServiceConnect[&quot;StackExchange&quot;]</code></pre>


<pre >
<code>
(*Out:*)

<span>
 <p>
  <img src='https://b3m2a1.github.io/img/post31-3058623906089846253.png'
      alt='post31-3058623906089846253' />
 </p>
</span>
</code>
</pre>

<p>I can never remember my requests or parameters, so we'll look those up:</p>
<pre class="prettyprint"><code>$so@&quot;Requests&quot;//Select[StringContainsQ[&quot;Question&quot;]]

(*Out:*)

{&quot;AnswerQuestion&quot;,&quot;LinkedQuestions&quot;,&quot;MyQuestions&quot;,&quot;MyTopQuestions&quot;,&quot;MyTopQuestionTags&quot;,&quot;NoAnswerQuestions&quot;,&quot;QuestionAnswers&quot;,&quot;QuestionComments&quot;,&quot;Questions&quot;,&quot;QuestionTimeline&quot;,&quot;RelatedQuestions&quot;,&quot;RenderQuestions&quot;,&quot;UnansweredQuestions&quot;,&quot;UserQuestions&quot;,&quot;UserTopQuestions&quot;,&quot;UserTopQuestionTags&quot;}

$so[&quot;RequestParameters&quot;, &quot;r&quot;-&gt;&quot;QuestionAnswers&quot;]

(*Out:*)

&lt;|&quot;Parameters&quot;-&gt;{&quot;id&quot;,&quot;site&quot;,&quot;page&quot;,&quot;pagesize&quot;,&quot;fromdate&quot;,&quot;todate&quot;,&quot;order&quot;,&quot;min&quot;,&quot;max&quot;,&quot;sort&quot;,&quot;filter&quot;,&quot;preview&quot;},&quot;Required&quot;-&gt;{&quot;site&quot;}|&gt;</code></pre>


<p>Then we pull the question ID off SE:</p>
<pre class="prettyprint"><code>$qid = 18393;</code></pre>


<p>And finally pull our data, using a filter that returns the  <code>"body_markdown"</code> field to get the Markdown out:</p>
<pre class="prettyprint"><code>$filter = &quot;!YOKGPNvvbIpDIehANcVbZ*)Cv2&quot;;
ans = $so[&quot;QuestionAnswers&quot;, &quot;id&quot; -&gt; $qid, &quot;site&quot; -&gt; &quot;Mathematica&quot;,
   &quot;filter&quot; -&gt; $filter];</code></pre>


<p>Now we can look at one of these bodies:</p>
<pre class="prettyprint"><code>ans[1, &quot;body_markdown&quot;]//Snippet[#, 5]&amp;</code></pre>


<pre class="program"><code style="width: 100%; white-space: pre-wrap;">(*Out:*)
##What the @#%^&amp;*?! do all those funny signs mean?##





Questions frequently arise about the meaning of the basic operators, and I hope
it will prove useful to have a sort of index for them. It would be nice to have</code></pre>

<p>Unfortunately HTML elements are baked into this so we'll need to clean out those:</p>
<pre class="prettyprint"><code>ImportString[&quot;&quot;, &quot;HTML&quot;];
getmd[ans_, n_] :=
   StringReplace[{
        ent : (&quot;&amp;#&quot; ~~ NumberString ~~ &quot;;&quot;) :&gt;
     ImportString[ent, &quot;HTML&quot;],
        &quot;\r&quot; -&gt; &quot;&quot;
        }]@
      Nest[
         StringReplace[System`Convert`HTMLImportDump`fromEntities],
         ans[n, &quot;body_markdown&quot;],
         2
         ]</code></pre>


<p>We'll also define a post-processing function to insert links where necessary:</p>
<pre class="prettyprint"><code>ppLinks[tag_, body_]:=
  (* Automatic invokes the default post-processor *)
  Automatic[tag,
    Replace[body,
      s_String:&gt;
        Sequence@@
          StringReplace[
            s,
            l:(&quot;http&quot;~~(Except[WhitespaceCharacter]..)):&gt;
              Automatic[&quot;Link&quot;, {l, StringSplit[l, &quot;//&quot;, 2][[2]]}]
            ],
      1]
    ]</code></pre>


<p>And then we can turn this into a  <code>Notebook</code> using BTools:</p>
<pre class="prettyprint"><code>&lt;&lt; BTools`Web`
MarkdownToNotebook[
    getmd[ans, 1],
    &quot;PostProcessor&quot; -&gt; ppLinks
    ] // CreateDocument</code></pre>


<p><img alt="post31-3108498676653567781" src="https://b3m2a1.github.io/img/post31-3108498676653567781.png" /></p>
<p>There's maybe a little bit of clean up work to do (say those two  <code>##</code> ) but it's a very small amount. We can then do with this  <code>Notebook</code> as we will...in particular we can copy it into a section notebook.</p>
<p><a id="makingabook" class="Subsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h2>Making a Book</h2>
<p>Once we've gotten enough content ported over we have three options for how to proceed. At this point, we can either make a notebook, a PDF, or a website (or all three). Each of these is also quite straightforward once we have the EasyIDE structure.</p>
<p><a id="makingabook" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Making a Book Notebook</h3>
<p>This distribution mechanism allows us to compile a single Notebook that we can send to our friends and coworkers that they can click through and is chaptered and easily navigable. All we have to do for this is go to our toolbar and hit  <code>Create Book</code> (if it's been some time since we updated the table of contents we probably want to hit  <code>Create TOC</code> first). Once we're done we get something like this:</p>
<iframe id="ytplayer" type="text/html" width="640" height="360"
src="https://www.youtube.com/embed/drLc4dNo8SI?autoplay=0"
  frameborder="0"></iframe>
<p><a id="makingapdf" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Making a PDF</h3>
<p>We can also build a PDF with this. There is a  <code>Create PDF</code> button provided that does exactly this. Admittedly, this can be a bit finnicky as the front-end can't always export a notebook to a PDF cleanly. On the other hand, this just operates by calling  <code>Export</code> on the constructed book notebook, so one can always use the system-level  <code>Print... ▸ Save as PDF</code> mechanism (on Mac at least).</p>
<p><a id="makingawebsite" class="Subsubsection" style="width:0;height:0;margin:0;padding:0;">&zwnj;</a></p>
<h3>Making a Website</h3>
<p>This is the most heavy-duty but most customizable distribution mechanism. All of the book/tutorial mechanisms are also designed to make it easy to create a website from them. For this we go to  <code>Plugins ▸ SiteBuilder ▸ Build Site</code> and choose our build settings. I'd turn off  <code>Generate Aggregations</code> as these pages are not exposed in the default theme. If you modify the theme obviously it makes sense to turn the aggregation pages back on.</p>
<p>After the build we get something like this:</p>

<p><em>landing page</em></p>
<p><img alt="post31-7698137239929577745" src="https://b3m2a1.github.io/img/post31-7698137239929577745.png" /></p>
<p><em>nav menu open</em></p>
<p><img alt="post31-4847562609283534597" src="https://b3m2a1.github.io/img/post31-4847562609283534597.png" /></p>
<p><em>sample article</em></p>
<p><img alt="post31-4404605020778869542" src="https://b3m2a1.github.io/img/post31-4404605020778869542.png" /></p>
<p>And then you can publish it wherever you like. If you'd like an easy place to publish to, I provided some info on something I set up to make that easy  <a href="https://b3m2a1.github.io/making-a-website-with-easyide.html#wlsitesgithubio">here</a> .</p>
  </div>
</article>
<hr>
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() {
    this.page.url = 'https://b3m2a1.github.io/writing-books-in-mathematica.html';
      this.page.identifier = 'writing-books-in-mathematica'
;
  };
  (function() {
    var d = document;
    var s = d.createElement('script');
    s.src = '//b3m2a1-home.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript class="text-muted">
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
      </div>
    </div>

  </div>

  <footer class="footer">
    <p class="col-sm-6 text-sm-right text-muted acknowledgement">
      Generated by
      <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a> /
      Forked from <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">alchemy</a>
    </p>
  </footer>

</body>

</html>
