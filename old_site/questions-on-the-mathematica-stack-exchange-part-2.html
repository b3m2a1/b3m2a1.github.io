<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Required meta tags always come first -->
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
Questions on the Mathematica Stack Exchange, Part 2 |         b3m2a1

</title>
  <link rel="canonical" href="https://b3m2a1.github.io/questions-on-the-mathematica-stack-exchange-part-2.html">

  <link rel="alternate" type="application/atom+xml" href="https://b3m2a1.github.io/feeds/all.atom.xml" title="Full Atom Feed">

  <link rel="apple-touch-icon" href="https://b3m2a1.github.io/apple-touch-icon.png" sizes="180x180">
  <link rel="icon" type="image/png" href="https://b3m2a1.github.io/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://b3m2a1.github.io/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://b3m2a1.github.io/manifest.json">
  <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://b3m2a1.github.io/theme/css/bootstrap.css">
  <link rel="stylesheet" href="https://b3m2a1.github.io/theme/css/font-awesome.css">
  <link rel="stylesheet" href="https://b3m2a1.github.io/theme/css/style.css">


<meta name="description" content="This is an extension on my previous post about digging through the Stack Exchange. If you want some more background head there. Last time we briefly looked at how questions tracked with Mathematica release dates. Today we’ll look at how time of posting correlates with question score and with …">

<link href="https://b3m2a1.github.io/theme/prettify/styles/prettify-mma.min.css" rel="stylesheet">
<script src="https://b3m2a1.github.io/theme/prettify/src/prettify.js"></script>
<!-- <script src="https://b3m2a1.github.io/theme/prettify/src/lang-mma.min.js"></script> -->

<script>
  function moveWindow (){window.location.hash="main-content";}
</script>


<script>
  (function(i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function() {
      (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date();
    a = s.createElement(o);
    a.async = 1;
    a.src = g;
    m = s.getElementsByTagName(o)[0];
    m.parentNode.insertBefore(a, m)
  })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
  ga('create', 'UA-103560228-1', 'auto');
  ga('send', 'pageview');
</script>

  <script>
    function openNav() {
      var thumb = document.getElementById("nav-thumb");
      var bar = document.getElementById("side-nav");
      thumb.onclick= closeNav;
      bar.classList.add("right-bar-open");
      bar.classList.remove("right-bar-closed");
      thumb.classList.add("nav-thumb-open");
      thumb.classList.remove("nav-thumb-closed");
    }

    function closeNav() {
      var thumb = document.getElementById("nav-thumb");
      var bar = document.getElementById("side-nav");
      thumb.onclick= openNav;
      bar.classList.remove("right-bar-open");
      bar.classList.add("right-bar-closed");
      thumb.classList.remove("nav-thumb-open");
      thumb.classList.add("nav-thumb-closed")
    }
  </script>


</head>

<body onload="PR.prettyPrint(); moveWindow()"
>
  <header class="header">
    <div class="top-bar">
    <div class="site-image">
      <img src=https://b3m2a1.github.io/img/site-image.png alt="b3m2a1">
    </div>
    <div class="site-links bubble floating">
      <h1 class="title">
          <a href="https://b3m2a1.github.io/">
            b3m2a1
          </a>
        </h1>
        <ul
          class="list-inline row site-link-row"
          id="top-bar-link-row"
          >
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/pages/about.html">About</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/pages/contact.html">Contact</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/categories.html">Categories</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/tags.html">Tags</a>
            </li>
            <li class="list-inline-item site-link">
              <a href="https://b3m2a1.github.io/archives.html">Archives</a>
            </li>
        </ul>
    </div>
    </div>
  </header>

  <div class="main" id="main-content">

    <div class="right-bar right-bar-closed" id="side-nav">
      <button
        id="nav-thumb"
        class="nav-thumb nav-thumb-closed"
        onclick="openNav()"
        >
      </button>
      <div class="blogroll bubble inset">
        <p>Links</p>
        <ul class="blogroll-links right-bar-links list-inline">
            <li class="right-bar-item">
              <a href="https://github.com/b3m2a1" class="blogroll-link right-bar-link"
                target="_blank">
                GitHub
              </a>
            </li>
            <li class="right-bar-item">
              <a href="https://mathematica.stackexchange.com/users/38205" class="blogroll-link right-bar-link"
                target="_blank">
                StackExchange
              </a>
            </li>
            <li class="right-bar-item">
              <a href="https://paclets.github.io/PacletServer" class="blogroll-link right-bar-link"
                target="_blank">
                Paclet Server
              </a>
            </li>
            <li class="right-bar-item">
              <a href="https://www.wolframcloud.com/objects/b3m2a1.docs/DocumentationServer/" class="blogroll-link right-bar-link"
                target="_blank">
                Docs
              </a>
            </li>
          </ul>
      </div>
    </div>

    <div class="left-content">
      <div class="container">
        <h1>Questions on the Mathematica Stack Exchange, Part 2
</h1>
        <hr>
<article class="article">
  <header>
    <ul class="list-inline">
      <li class="list-inline-item text-muted" title="2017-07-31T22:48:28-05:00">
        <i class="fa fa-clock-o"></i>
        Mon 31 July 2017
      </li>
      <li class="list-inline-item">
        <i class="fa fa-folder-open-o"></i>
        <a href="https://b3m2a1.github.io/category/posts.html">posts</a>
      </li>
      <li class="list-inline-item">
        <i class="fa fa-user-o"></i>
        <a href="https://b3m2a1.github.io/author/b3m2a1.html">b3m2a1</a>      </li>
      <li class="list-inline-item">
        <i class="fa fa-files-o"></i>
        <a href="https://b3m2a1.github.io/tag/mathematica.html">#mathematica</a>      </li>
    </ul>
  </header>
  <div class="content">
    <p>This is an extension on my  <a href="/questions-on-the-mathematica-stack-exchange.html">previous post</a>  about digging through the Stack Exchange. If you want some more background head there.</p>
<p>Last time we briefly looked at how questions tracked with Mathematica release dates. Today we’ll look at how time of posting correlates with question score and with answer score.</p>
<p>First off, let’s get all our answer data:</p>
<pre class="prettyprint"><code>$so = ServiceConnect[&quot;StackExchange&quot;];
$answers =
   $so[&quot;QueryIterate&quot;,
     &quot;Request&quot; -&gt; &quot;Answers&quot;,
     &quot;site&quot; -&gt; &quot;mathematica&quot;
     ];
$answers // Length

(*Out:*)

66546</code></pre>


<p>And export it like before:</p>
<pre class="prettyprint"><code>KeyChainConnect[]; 
CloudExport[$answers, &quot;MX&quot;, &quot;user:b3m2a1/mse_answers_list.mx&quot;, 
 Permissions -&gt; &quot;Public&quot;]

(*Out:*)

CloudObject[&quot;https://www.wolframcloud.com/objects/b3m2a1/mse_answers_\
list.mx&quot;]</code></pre>


<p>And we’ll import the old questions:</p>
<pre class="prettyprint"><code>$questions = CloudImport[&quot;user:b3m2a1/mse_question_list.mx&quot;];</code></pre>


<p>Now let’s build an  <a href="https://reference.wolfram.com/language/ref/EventSeries.html"><code>EventSeries</code></a>  over the questions and answer scores:</p>
<pre class="prettyprint"><code>questionScores =
  EventSeries@
    AssociationThread[
      FromUnixTime /@ Lookup[Normal[$questions], &quot;creation_date&quot;],
      Lookup[Normal[$questions], &quot;score&quot;]
      ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-6321857981943799509" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-6321857981943799509.png" /></p>
<pre class="prettyprint"><code>answerScores =
  EventSeries@
    AssociationThread[
      FromUnixTime /@ Lookup[Normal[$answers], &quot;creation_date&quot;],
      Lookup[Normal[$answers], &quot;score&quot;]
      ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-3598993207004014920" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-3598993207004014920.png" /></p>
<p>Note that the answers extend a bit further, and we could import the new data. Or we could just chop both  <code>EventSeries</code>  and, given my laziness (and that you, dear reader, don’t want to look at more boring code) we’ll do the latter.</p>
<pre class="prettyprint"><code>questionScores =
   TimeSeriesWindow[
   questionScores, {DateObject[{1970}], DateObject[{2017, 6, 30}]}];
answerScores =
   TimeSeriesWindow[
   answerScores, {DateObject[{1970}], DateObject[{2017, 6, 30}]}];</code></pre>


<p>Cool. Now they treat the same time span, so we can begin. Before any real work, though, let’s just look at what we have here:</p>
<pre class="prettyprint"><code>Map[
   {DateListPlot[#, PlotRange -&gt; All], 
    Histogram[#[&quot;Values&quot;], PlotRange -&gt; All]} &amp;,
   {questionScores, answerScores}
   ] // Grid

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-8256581848520602254" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-8256581848520602254.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-8237165045256378033" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-8237165045256378033.png" /></p>
<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-2059780197066256639" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-2059780197066256639.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-1667271355729158206" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-1667271355729158206.png" /></p>
<p>We can see that:</p>
<ul>
<li>
<p>Scores peak very strongly for both in the 1-5 range</p>
</li>
<li>
<p>Answer scores appear to be higher than question scores on average</p>
</li>
</ul>
<p>And these observations are borne out by testing:</p>
<pre class="prettyprint"><code>questionScores[&quot;Values&quot;] // Median
answerScores[&quot;Values&quot;] // Median

(*Out:*)

3

(*Out:*)

4

questionScores[&quot;Values&quot;] // Mean // N
answerScores[&quot;Values&quot;] // Mean // N

(*Out:*)

4.58619

(*Out:*)

5.32322</code></pre>


<p><a id="score-as-a-function-of-time-of-day" >&zwnj;</a></p>
<h2>Score as a Function of Time of Day</h2>
<p>We’ll start by simply sampling every day down to its time component</p>
<pre class="prettyprint"><code>dateHMReform[dates : {__DateObject}] :=

  TimeObject[#, TimeZone -&gt; -4.] &amp; /@
     Thread[
       {
         DateValue[dates, &quot;Hour&quot;],
         DateValue[dates, &quot;Minute&quot;],
         DateValue[dates, &quot;Second&quot;]
         }
       ];

questionHMScores =
   EventSeries[
   Thread@{dateHMReform[questionScores[&quot;Dates&quot;]], 
     questionScores[&quot;Values&quot;]}];
answerHMScores =
   EventSeries[
   Thread@{dateHMReform[answerScores[&quot;Dates&quot;]], 
     answerScores[&quot;Values&quot;]}];
DateListPlot[#, PlotRange -&gt; All] &amp; /@ {answerHMScores, 
   questionHMScores} // Column

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-4686921911734673632" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-4686921911734673632.png" /></p>
<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-31470148175507030" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-31470148175507030.png" /></p>
<p>And... all we see is noise. So let’s restrict ourselves to the questions and do a simple smoothing:</p>
<pre class="prettyprint"><code>smoothQHMS = 
  MovingMap[Mean, questionHMScores, Quantity[1, &quot;Hours&quot;] ];
smoothQHMS // DateListPlot[#, PlotRange -&gt; All] &amp;

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-2775421680948229544" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-2775421680948229544.png" /></p>
<p>And that does seem to be interpretable (although it’s super funky that the graph doesn’t cycle appropriately). But first let’s just look at how this compares to the questions posted at a given time:</p>
<pre class="prettyprint"><code>smoothQHMSLength = 
  MovingMap[Length, questionHMScores, Quantity[1, &quot;Hours&quot;] ];
Thread[{#[&quot;Dates&quot;], Rescale[#[&quot;Values&quot;]]}] &amp; /@ {
    smoothQHMS,
    smoothQHMSLength
    } // DateListPlot[#, PlotRange -&gt; All] &amp;

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-7774584598556387992" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-7774584598556387992.png" /></p>
<p>Which is interesting. There are a few possible interpretations for this data:</p>
<ul>
<li>
<p>The proportion of users who simply want quick help and don’t care about question quality increases in that middle-of-the-day peak and a falling-tide lowers all ships</p>
</li>
<li>
<p>Around 7:00PM, 9:00 PM and 2:00 AM EST people ask better questions</p>
</li>
<li>
<p>Around 7:00PM, 9:00 PM and 2:00 AM EST people are more prone to up-voting questions</p>
</li>
<li>
<p>There’re some outliers distorting those times</p>
</li>
</ul>
<p>We’ll tackle the last and first of these propositions first, as they’re easiest to treat.</p>
<h3>Proposal: Outliers skew the data</h3>
<p>First, the outliers:</p>
<pre class="prettyprint"><code>Select[
   Normal[smoothQHMS],
   Between[#[[2]], {0, 25}] &amp;
   ] // DateListPlot[#, PlotRange -&gt; All] &amp;

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-2775421680948229544" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-2775421680948229544.png" /></p>
<p>So that’s clearly not the issue here. Which is really unsurprising given that the highest and lowest question scores are &lt;1000 and the minimum number of questions asked over one of these time periods is 1000.</p>
<h3>Proposal: Low-scoring questions drown out the others</h3>
<p>For the other, we’ll try removing users who have asked fewer than 5 questions, considering those questions a form of trial-period or whatnot, to learn how best to ask questions. </p>
<pre class="prettyprint"><code>$userQuestionCounts = $questions[All, &quot;owner&quot;, &quot;user_id&quot;] // Normal //
    Counts;
$experiencedUsers = Keys@Select[$userQuestionCounts, GreaterThan[5]];
$experiencedUserQuestions = $questions[
   Select[MemberQ[$experiencedUsers, #[&quot;owner&quot;, &quot;user_id&quot;]] &amp;]];
experiencedUserQuestionScores =
   TimeSeriesWindow[
     EventSeries@
       AssociationThread[
         FromUnixTime /@ 
      Lookup[Normal[$experiencedUserQuestions], &quot;creation_date&quot;],
         Lookup[Normal[$experiencedUserQuestions], &quot;score&quot;]
         ],
     {DateObject[{1970}], DateObject[{2017, 6, 30}]}
     ];</code></pre>


<p>Then do the same date renormalization:</p>
<pre class="prettyprint"><code>experiencedUserQuestionHMScores =
   EventSeries[
     Thread@{
        dateHMReform[experiencedUserQuestionScores[&quot;Dates&quot;]],
        experiencedUserQuestionScores[&quot;Values&quot;]
        }
     ];
smoothEUQS = 
  MovingMap[Mean, experiencedUserQuestionHMScores, 
   Quantity[1, &quot;Hours&quot;]];
{
   smoothQHMS,
   smoothEUQS
   } // DateListPlot[#, PlotRange -&gt; All] &amp;

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-7662088961323393167" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-7662088961323393167.png" /></p>
<p>And we see a scaling shift (i.e. each data point seems to be multiplied by some factor rather than having a constant added) but the exact same pattern.</p>
<p>So that leaves us with two discussions left, and unfortunately we’re not yet equipped to look at either of them, so first we really need to identify where those peaks are coming from.</p>
<h3>Identiify the Peaks</h3>
<p>Let’s first note the three main peaks:</p>
<pre class="prettyprint"><code>peakDates =
   Pick[
       TimeObject /@ #[[All, 1]],
       GreaterThan[6] /@ #[[All, 2]]
       ] &amp;@
     Pick[
       smoothedEUQS[&quot;DatePath&quot;],
       EqualTo[1] /@
         PeakDetect[
           smoothEUQS[&quot;Values&quot;],
           250 (*Picked to give 3 distinct points*)
           ]
       ];
peakDates

(*Out:*)

{TimeObject[{3, 18, 17.}, TimeZone -&gt; -4.], 
 TimeObject[{18, 50, 6.}, TimeZone -&gt; -4.], 
 TimeObject[{21, 59, 32.}, TimeZone -&gt; -4.]}</code></pre>


<p>Now let’s find standard user timezones, where available. First we’re gonna have to pull in all the user data:</p>
<pre class="prettyprint"><code>$users =
   $so[&quot;QueryIterate&quot;,
     &quot;Request&quot; -&gt; &quot;Users&quot;,
     &quot;site&quot; -&gt; &quot;mathematica&quot;
     ];
$users // Length

(*Out:*)

33541

CloudExport[$users, &quot;MX&quot;, &quot;user:b3m2a1/mse_users_list.mx&quot;, 
 Permissions -&gt; &quot;Public&quot;]

(*Out:*)

CloudObject[&quot;https://www.wolframcloud.com/objects/b3m2a1/mse_users_\
list.mx&quot;]</code></pre>


<p>Then we’ll extract time zones by determining location:</p>
<pre class="prettyprint"><code>userPlaceNames =
   StringSplit[
        If[StringContainsQ[#, &quot;#&quot;], ImportString[#, &quot;HTML&quot;], #],
        &quot;/&quot;] &amp; /@ DeleteMissing@Normal@$users[All, &quot;location&quot;] // 
   Flatten;
userCountries =
   Interpreter[&quot;Country&quot;][userPlaceNames];
userCities =
   Interpreter[&quot;AdministrativeDivision&quot;][
   Pick[userPlaceNames, FailureQ /@ userCountries]];
userTimeZones =
   N@Mean@QuantityMagnitude@
         UnitConvert[EntityValue[#, &quot;OffsetFromUTC&quot;], 
        &quot;Hours&quot;] &amp; /@
      EntityValue[
        Cases[_Entity]@
          Join[userCountries, userCities],
        &quot;TimeZones&quot;
        ];</code></pre>


<p>Then build a histogram of these:</p>
<pre class="prettyprint"><code>Histogram[
  userTimeZones,
  {Range[-8, 12, 2]},
  Ticks -&gt; {Range[-8, 12, 2], Automatic}
  ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-2727093342462400567" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-2727093342462400567.png" /></p>
<p>Let’s then remap the place names to their values, with the same binning:</p>
<pre class="prettyprint"><code>KeySelect[IntegerQ]@
      GroupBy[
        Thread[
          CommonName@
             Cases[_Entity]@
               Join[userCountries, userCities] -&gt;

       Round[userTimeZones, 2]
          ],
        Last -&gt; First
        ] // Map[StringRiffle[Keys@ReverseSort@Counts@#, &quot; | &quot;] &amp;] // 
  KeySort;
userPlaceNameTZs // Dataset

(*Out:*)

Dataset[ &lt;&gt; ]</code></pre>


<p>So there’re clearly some oddities with my method for computing time zones, but overall we’re in a pretty good state to start looking at what those points could be. </p>
<p>In particular, let's first assume they correspond to Europe in some way as, of the people who have tagged a location on their account, they're by far the dominant users of the site — although, just as a sanity check, in terms of a single country the maximum number of users do come from United States.</p>
<p>Now moving on, let’s shift that plot above by 6 hours (UTC-4 + UTC+2) with the peaks highlighted:</p>
<pre class="prettyprint"><code>peakTimeEventSeries = EventSeries@Thread[{peakTimes, 10}];
europeSEUQs =
   {TimeObject@#[[1]], #[[2]]} &amp; /@

    TimeSeriesShift[smoothEUQS, Quantity[6, &quot;Hours&quot;]][&quot;DatePath&quot;] // 
   EventSeries;
europePeakTimes =
   {TimeObject@#[[1]], #[[2]]} &amp; /@

    TimeSeriesShift[peakTimeEventSeries, Quantity[6, &quot;Hours&quot;]][
     &quot;DatePath&quot;] // EventSeries;
europeSHMLs =
   {TimeObject@#[[1]], #[[2]]} &amp; /@

    TimeSeriesShift[smoothQHMSLength, Quantity[6, &quot;Hours&quot;]][
     &quot;DatePath&quot;] // EventSeries;
europeScaledSHMLs =
   Thread[{
        #[&quot;Dates&quot;],
        Rescale[#[&quot;Values&quot;], MinMax@#[&quot;Values&quot;], 
       MinMax@europeSEUQs[&quot;Values&quot;]]
        }] &amp;@europeSHMLs;

Show[
  DateListPlot[{europeSEUQs, europeScaledSHMLs}],
  DateListPlot[
    europePeakTimes,
    Joined -&gt; False,
    Filling -&gt; Axis
    ]
  ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-4782766389047569966" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-4782766389047569966.png" /></p>
<p>Which is interesting and provides better framing for the question time curve, but also suggests those peaks probably aren’t a pure European effect. </p>
<pre class="prettyprint"><code>europePeakTimes[&quot;Dates&quot;]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-9167288617133417651" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-9167288617133417651.png" /></p>
<p>1:00 AM is plausible, given how many programmers tend to be night-owls, 9:15 is plausible—start of the workday and all that—but 4:00 AM seems odd. </p>
<p>So let’s just quickly look at the same graph for PST:</p>
<pre class="prettyprint"><code>pstSEUQs =
   {TimeObject@#[[1]], #[[2]]} &amp; /@

    TimeSeriesShift[smoothEUQS, Quantity[-3, &quot;Hours&quot;]][&quot;DatePath&quot;] // 
   EventSeries;
pstPeakTimes =
   {TimeObject@#[[1]], #[[2]]} &amp; /@

    TimeSeriesShift[peakTimeEventSeries, Quantity[-3, &quot;Hours&quot;]][
     &quot;DatePath&quot;] // EventSeries;
pstSHMLs =
   {TimeObject@#[[1]], #[[2]]} &amp; /@

    TimeSeriesShift[smoothQHMSLength, Quantity[-3, &quot;Hours&quot;]][
     &quot;DatePath&quot;] // EventSeries;
pstScaledSHMLs =
   Thread[{
        #[&quot;Dates&quot;],
        Rescale[#[&quot;Values&quot;], MinMax@#[&quot;Values&quot;], 
       MinMax@pstSEUQs[&quot;Values&quot;]]
        }] &amp;@pstSHMLs;

Show[
    DateListPlot[{pstSEUQs, pstScaledSHMLs}],
    DateListPlot[
            pstPeakTimes,
            Joined -&gt; False,
            Filling -&gt; Axis
            ]
    ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-5727946783754797486" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-5727946783754797486.png" /></p>
<pre class="prettyprint"><code>pstPeakTimes[&quot;Dates&quot;]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-2397163837034603994" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-2397163837034603994.png" /></p>
<p>These times do seem pretty reasonable for bouts of activity. So let’s just try cutting out the PST users. Maybe they’re just particularly good. First we need to remap the actual user location strings to their timezones:</p>
<pre class="prettyprint"><code>userPlaceNameTimes =
   AssociationThread[
     DeleteMissing@Normal@$users[All, &quot;location&quot;],
     Replace[
       DeleteMissing@Normal@$users[All, &quot;location&quot;],
       Normal[
         KeyMap[_?(StringContainsQ[#]) &amp;]@
           AssociationThread[
             userPlaceNames -&gt;
               Lookup[
                 AssociationThread[
                   Cases[_Entity]@
                     Join[userCountries, userCities],
                   Round[userTimeZones, 2]
                   ],
                 ReplacePart[
                   userCountries,

          Thread[Position[userCountries, _Failure] -&gt; userCities]
                   ],
                 \[Infinity]
                 ]
             ]
         ],
       1
       ]
     ];</code></pre>


<p>Then pick the users to drop:</p>
<pre class="prettyprint"><code>pstUserIDs =
   Pick[
     Normal@$users[All, &quot;user_id&quot;],
     MatchQ[-6 | -8] /@

    Lookup[userPlaceNameTimes, Normal@$users[[All, &quot;location&quot;]]]
     ];</code></pre>


<p>Then for testing we’ll generalize that function for generating a comparative peak plot:</p>
<pre class="prettyprint"><code>compPeakData[userSel : Except[_List], 
   exclude : True | False : True] :=
   compPeakData[
     Pick[
       Normal@$users[All, &quot;user_id&quot;],
       userSel /@

     Lookup[userPlaceNameTimes, Normal@$users[[All, &quot;location&quot;]]]
       ],
     exclude
     ];
compPeakData[l_List, exclude : True | False : True] :=

  compPeakData[l, exclude] =
     Module[{a = &lt;||&gt;},
       a[&quot;Users&quot;] = l;
       a[&quot;Questions&quot;] =
         $questions[
      Select[If[exclude, Not, Identity]@
         MemberQ[a[&quot;Users&quot;], #[&quot;owner&quot;, &quot;user_id&quot;]] &amp;]];
       a[&quot;EventSeries&quot;] =
         TimeSeriesWindow[
           EventSeries@
             AssociationThread[

        FromUnixTime /@ 
         Lookup[Normal[a[&quot;Questions&quot;]], &quot;creation_date&quot;],
               Lookup[Normal[a[&quot;Questions&quot;]], &quot;score&quot;]
               ],
           {DateObject[{1970}], DateObject[{2017, 6, 30}]}
           ];
       a[&quot;HourMinuteSeries&quot;] =
         EventSeries[
           Thread@{
              dateHMReform[a[&quot;EventSeries&quot;][&quot;Dates&quot;]],
              a[&quot;EventSeries&quot;][&quot;Values&quot;]
              }
           ];
       a[&quot;SmoothData&quot;] =
         MovingMap[Mean, a[&quot;HourMinuteSeries&quot;], 
      Quantity[1, &quot;Hours&quot;]];
       a
       ];
compPeakPlot[userSel_, exclude : True | False : True] :=
  {
     smoothQHMS,
     compPeakData[userSel, exclude][&quot;SmoothData&quot;]
     } // DateListPlot[#, PlotRange -&gt; All] &amp;</code></pre>


<p>And for the PST people:</p>
<pre class="prettyprint"><code>compPeakPlot[MatchQ[-8 | -6]]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-3307809793437076049" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-3307809793437076049.png" /></p>
<p>So that’s clearly not it, although dropping them clearly does lower the overall quality. But while we’re here let’s just try dropping all the users who’ve put in a location:</p>
<pre class="prettyprint"><code>compPeakPlot[IntegerQ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-562637859795717584" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-562637859795717584.png" /></p>
<p>And that decreases some of those peak intensities, but only one peak is really washed out significantly. And we’ll just roll through the landscape, then, dropping in timezones, to see who affects what and how much.</p>
<pre class="prettyprint"><code>compPeakPlot[Between[{#, # + 1}]] &amp; /@ Range[-12, 12, 2] // 
  ArrayReshape[#, {3, 4}] &amp; // Grid

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-3243486666359046764" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-3243486666359046764.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-3243486666359046764" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-3243486666359046764.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-5279462376805845349" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-5279462376805845349.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-2031720187355632067" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-2031720187355632067.png" /></p>
<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-1363982948419069043" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-1363982948419069043.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-3243486666359046764" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-3243486666359046764.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-5016894738036978998" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-5016894738036978998.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-5773685333704469464" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-5773685333704469464.png" /></p>
<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-7549780497994244577" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-7549780497994244577.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-1093665490856256776" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-1093665490856256776.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-6768074355820357664" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-6768074355820357664.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-5996557942667300833" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-5996557942667300833.png" /></p>
<p>All told, we can see we don’t have quite enough to determine who is causing what. But we can see that there are timezones with a big effect, chiefly -6, -4, 2 and 10 So let’s look at these on their own:</p>
<pre class="prettyprint"><code>DateListPlot[
  compPeakData[Between[{#, # + 1}], False][&quot;SmoothData&quot;] &amp; /@ {-6, -4,
    2, 10},
  PlotLegends -&gt; {-6, -4, 2, 10},
  PlotRange -&gt; All
  ]

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-5869307934614251792" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-5869307934614251792.png" /></p>
<p>And just for ease of viewing let’s split that up:</p>
<pre class="prettyprint"><code>MapIndexed[
    DateListPlot[
       Thread[{TimeObject /@ #[[All, 1]], Rescale@#[[All, 2]]}] &amp;@
          TimeSeriesShift[
             compPeakData[Between[{#, # + 1}], False][&quot;SmoothData&quot;],
             Quantity[4 + #, &quot;Hours&quot;]
             ][&quot;DatePath&quot;] // EventSeries,
       PlotLegends -&gt; {#},
       PlotRange -&gt; All,
       PlotStyle -&gt; ColorData[97][First@#2]
       ] &amp;,
    {-6, -4, 2, 10}
    ] // ArrayReshape[#, {2, 2}] &amp; // Grid

(*Out:*)</code></pre>


<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-169882562582482564" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-169882562582482564.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-3229591595150948762" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-3229591595150948762.png" /></p>
<p><img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-7561309000619229626" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-7561309000619229626.png" />    <img alt="posts-questions-on-the-mathematica-stack-exchange-part-2-7252690616485916719" src="https://b3m2a1.github.io/img/posts-questions-on-the-mathematica-stack-exchange-part-2-7252690616485916719.png" /></p>
<p>And finally we get some sense for what’s going on. It seems it’s that early morning period (2-6 AM). Questions posted then are disproportionately likely to be high scoring. So now we can return to our two ideas, but updated to take this into account:</p>
<ul>
<li>
<p>In the early morning people ask better questions</p>
</li>
<li>
<p>In the early morning people are more prone to up-voting questions</p>
</li>
</ul>
<h3>Proposal: Up-Voting Rates</h3>
<p>Initially, this would seem to be the more plausible of the two, simply by exclusion. How is it likely that people are asking their best questions early in the morning? Unfortunately we’d need to sample the API at many different time points to get a sense for how true this is (pulling the newest ~50 or so questions) and so that cannot be evaluated right now.</p>
<h3>Proposal: Better Questions</h3>
<p>On the other hand, the “better questions” hypothesis isn’t actually as dead as one might think. The reason being that if someone is on the Stack Exchange so late at night it likely means one of two things:</p>
<ul>
<li>
<p>they’re clearly committed to it</p>
</li>
<li>
<p>they’ve got a problem they spent the evening trying to solve and couldn’t</p>
</li>
</ul>
<p>Both of those could plausibly lead to good questions. Even more, though, assuming being up late saps a person of their willingness to dig deep into problems that come up, they may in fact post  <em><em>easier</em></em>  questions than usual. And easier questions (or, even more generally, broader questions) may have wider appeal.</p>
<p>Obviously this is an unprovable proposal, where as the up-voting rates is theoretically provable, but I personally think there is something to be said for the “better questions get asked late at night” idea. In any case, it’s been a fun dive into a seemingly simple question: “when do higher-scoring questions get asked” which took a few unanticipated turns.</p>
<p>‘Til next time.</p>
  </div>
</article>
<hr>
<div id="disqus_thread"></div>
<script>
  var disqus_config = function() {
    this.page.url = 'https://b3m2a1.github.io/questions-on-the-mathematica-stack-exchange-part-2.html';
      this.page.identifier = 'b3m2a1-home-c0734234-b9d2-4fed-ad21-f5d0e5b0c315';
;
  };
  (function() {
    var d = document;
    var s = d.createElement('script');
    s.src = '//b3m2a1-home.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>
<noscript class="text-muted">
  Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
      </div>
    </div>

  </div>

  <footer class="footer">
    <p class="col-sm-6 text-sm-right text-muted acknowledgement">
      Generated by
      <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a> /
      Forked from <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">alchemy</a>
    </p>
  </footer>

</body>

</html>